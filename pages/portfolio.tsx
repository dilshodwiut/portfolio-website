import * as React from "react";
import type { NextPage } from "next";
import Head from "next/head";
import Header from "@/components/templates/Header/Header";
import Footer from "@/components/templates/Footer/Footer";
import Expertise from "@/components/templates/Expertise/Expertise";
import Divider from "@/components/atoms/Divider/Divider";
import Statistics from "@/components/templates/Statistics/Statistics";
import Delivery from "@/components/templates/Delivery/Delivery";
import Clients from "@/components/templates/Clients/Clients";
import Practices from "@/components/templates/Practices/Practices";
import Content from "@/components/atoms/Content/Content";
import Projects from "@/components/templates/Projects/Projects";

const Portfolio: NextPage = (props) => {
  const { projects } = props;
  return (
    <>
      <Head>
        <title>Dilshod | Frontend Developer</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/man.png" />
      </Head>
      <Header />
      <Content>
        <Expertise />
        <Divider />
        <Statistics />
        <Divider />
        <Delivery />
        <Divider />
        <Clients />
        <Projects projects={projects} />
        <Divider />
        <Practices />
      </Content>
      <Footer />
    </>
  );
};

export default Portfolio;

export async function getStaticProps(context) {
  // const projects = await import("@/data/projects.json");
  // const projects = await fetch("@/data/projects.json");
  const projects = await fetch("https://dilshod.me/api/projects");
  console.log(projects);
  const data = await projects.json();
  return {
    props: {
      projects: data,
    },
  };
}
